pipeline {
    agent any

    environment {
        DOCKER_IMAGE = 'yagnesh4152/node1'
        DOCKER_REGISTRY_CREDENTIALS = 'DOCKER_CREDENTIALS'
    }

    stages {
        stage("INSTALL dependencies") {
            steps {
                echo "Installing dependencies"
            }
        }

        stage("Build docker image") {
            steps {
                echo "Build docker image"
                // sh 'docker build -t $DOCKER_IMAGE:${BUILD_NUMBER} .'
            }
        }

        stage("Push docker image") {
            steps {
                echo "Push docker image"
                // withCredentials([usernamePassword(
                //     credentialsId: "${DOCKER_REGISTRY_CREDENTIALS}",
                //     usernameVariable: 'DOCKER_USER',
                //     passwordVariable: 'DOCKER_PASS'
                // )]) {
                //     sh 'echo $DOCKER_PASS | docker login -u $DOCKER_USER --password-stdin'
                //     sh "docker push $DOCKER_IMAGE:${BUILD_NUMBER}"
                // }
            }
        }
    }

    post {
        success {
            echo "Pipeline completed successfully!"
        }
        failure {
            echo "Pipeline failed."
        }
    }
}
